/**
 * Created by Vladi on 3/7/2015.
 * wrapper for http://morrisjs.github.io/morris.js/
 * version 1.0
 */
!function(){var t={};window.MTA||(window.MTA=t),t.Morris=function(t,e,i,n,r,o,s){function a(t,e,i,n,r,o){this.container=document.querySelector("#"+e),this.origData=i,this.xkey=n,this.origYKeys=r,this.displayedYKeys=r,this.labels=o,this.morris=Morris[t]({element:e,data:i,xkey:n,ykeys:r,labels:o})}if(t&&e&&i&&n&&r&&o&&Morris){var h=new a(t,e,i,n,r,o);return a.prototype.initSelectYKeys=function(){var t=h.origYKeys,e=document.createElement("div");e.className="buttonsContainer";for(var i in t){var n=document.createElement("input"),r=document.createElement("span");r.className="yKeyButton",t.hasOwnProperty(i)&&(n.setAttribute("type","checkbox"),n.checked=!0,n.setAttribute("data-key-name",t[i]),n.addEventListener("click",function(){var t=this.getAttribute("data-key-name");t&&h.toggleYKeys(t)}),r.appendChild(n),r.appendChild(document.createTextNode("Show "+t[i])),e.appendChild(r))}this.container.appendChild(e),this.buttonsContainer=e},a.prototype.show=function(){this.container.style.display="inline-block"},a.prototype.hide=function(){this.container.style.display="none"},a.prototype.setData=function(t){t&&t.length>0&&this.morris.setData(t)},a.prototype.toggleYKeys=function(t){for(var e=this.displayedYKeys,i=[],n=0,r=e.length;r>n;n++)i.push(e[n]);for(var o=0,s=t.length;s>o;o++){var a=i.indexOf(t[o]);a>-1?delete i[a]:i.push(t[o])}this.displayedYKeys=i,this.setYKeys(i)},a.prototype.setYKeys=function(t){this.setData(this.filterData(this.origData,t))},a.prototype.filterData=function(t,e){var i=[];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o={},s=!1;for(var a in r)if(r.hasOwnProperty(a))for(var h=0,y=e.length;y>h;h++)if(this.xkey===a||a===e[h]){o[a]=t[n][a],s=!0;break}s&&i.push(o)}return i},s&&h.initSelectYKeys(),h}}}();