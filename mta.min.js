/**
 * Created by Vladi on 3/7/2015.
 * wrapper for http://morrisjs.github.io/morris.js/
 * version 1.0
 */
!function(){function e(e,t,n,i,r,a,s){function o(e,t,n,i,r,a){this.container=document.querySelector("#"+t),this.origData=n,this.xkey=i,this.origYKeys=r,this.displayedYKeys=r,this.labels=a,this.morris=Morris[e]({element:t,data:n,xkey:i,ykeys:r,labels:a})}if(e&&t&&n&&i&&r&&a&&Morris){var c=new o(e,t,n,i,r,a);return o.prototype.initSelectYKeys=function(){var e=c.origYKeys,t=document.createElement("div"),n=this.container.parentNode;t.className="buttonsContainer",t.setAttribute("data-parent-graph",this.container.id);for(var i in e){var r=document.createElement("input"),a=document.createElement("span");a.className="yKeyButton",e.hasOwnProperty(i)&&(r.setAttribute("type","checkbox"),r.checked=!0,r.style.cursor="pointer",a.style.cursor="pointer",r.setAttribute("data-key-name",e[i]),r.addEventListener("change",function(){var e=this;e.checked=!e.checked}),a.addEventListener("click",function(){var e=this.childNodes[0],t=e.getAttribute("data-key-name");t&&(c.toggleYKeys(t),e.checked=!e.checked)}),a.appendChild(r),a.appendChild(document.createTextNode("Display "+e[i])),t.appendChild(a))}n.insertBefore(t,this.container.nextSibling),this.buttonsContainer=t},o.prototype.show=function(){this.container.style.display="inline-block"},o.prototype.hide=function(){this.container.style.display="none"},o.prototype.setData=function(e){e&&e.length>0&&this.morris.setData(e)},o.prototype.toggleYKeys=function(e){for(var t=this.displayedYKeys,n=[],i=0,r=t.length;r>i;i++)n.push(t[i]);for(var a=0,s=e.length;s>a;a++){var o=n.indexOf(e[a]);o>-1?delete n[o]:n.push(e[a])}this.displayedYKeys=n,this.setYKeys(n)},o.prototype.setYKeys=function(e){this.setData(this.filterData(this.origData,e))},o.prototype.filterData=function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],a={},s=!1;for(var o in r)if(r.hasOwnProperty(o))for(var c=0,h=t.length;h>c;c++)if(this.xkey===o||o===t[c]){a[o]=e[i][o],s=!0;break}s&&n.push(a)}return n},s&&c.initSelectYKeys(),c}}var t={};window.MTA||(window.MTA=t),t.Line=function(t,n,i,r,a,s){return e("Line",t,n,i,r,a,s)},t.Bar=function(t,n,i,r,a,s){return e("Bar",t,n,i,r,a,s)}}();