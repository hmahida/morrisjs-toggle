/**
 * Created by Vladi on 3/7/2015.
 * wrapper for http://morrisjs.github.io/morris.js/
 * version 1.0
 */
!function(){function e(e,t,i){function n(e,t){this.container=document.querySelector("#"+t.element),this.origData=t.data,this.xkey=t.xkey,this.origYKeys=t.ykeys,this.displayedYKeys=t.ykeys,this.labels=t.labels,this.morris=Morris[e](t)}if(!e||!t)return void console.log("Please make sure morris obj is correct");if(!Morris)return void console.log("Missing morris.js");var r=new n(e,t);return n.prototype.initSelectYKeys=function(){var e=r.origYKeys,t=document.createElement("div"),i=this.container.parentNode;t.className="buttonsContainer",t.setAttribute("data-parent-graph",this.container.id);for(var n in e){var o=document.createElement("input"),s=document.createElement("span");s.className="yKeyButton",e.hasOwnProperty(n)&&(o.setAttribute("type","checkbox"),o.checked=!0,o.style.cursor="pointer",s.style.cursor="pointer",o.setAttribute("data-key-name",e[n]),o.addEventListener("change",function(){var e=this;e.checked=!e.checked}),s.addEventListener("click",function(){var e=this.childNodes[0],t=e.getAttribute("data-key-name");t&&(r.toggleYKeys(t),e.checked=!e.checked)}),s.appendChild(o),s.appendChild(document.createTextNode("Display "+e[n])),t.appendChild(s))}i.insertBefore(t,this.container.nextSibling),this.buttonsContainer=t},n.prototype.show=function(){this.container.style.display="inline-block"},n.prototype.hide=function(){this.container.style.display="none"},n.prototype.setData=function(e){e&&e.length>0&&this.morris.setData(e)},n.prototype.toggleYKeys=function(e){for(var t=this.displayedYKeys,i=[],n=0,r=t.length;r>n;n++)i.push(t[n]);for(var o=0,s=e.length;s>o;o++){var a=i.indexOf(e[o]);a>-1?delete i[a]:i.push(e[o])}this.displayedYKeys=i,this.setYKeys(i)},n.prototype.setYKeys=function(e){this.setData(this.filterData(this.origData,e))},n.prototype.filterData=function(e,t){var i=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o={},s=!1;for(var a in r)if(r.hasOwnProperty(a))for(var c=0,h=t.length;h>c;c++)if(this.xkey===a||a===t[c]){o[a]=e[n][a],s=!0;break}s&&i.push(o)}return i},i&&r.initSelectYKeys(),r}var t={};window.MTA||(window.MTA=t),t.Line=function(t,i){return e("Line",t,i)},t.Bar=function(t,i){return e("Bar",t,i)}}();